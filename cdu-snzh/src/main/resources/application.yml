server:
  port: 8062

spring:
  profiles:
    active: local
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: ${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/cdu_snzh_miniapp}
    username: ${SPRING_DATASOURCE_USERNAME:root}
    password: ${SPRING_DATASOURCE_PASSWORD:123456}
    type: com.zaxxer.hikari.HikariDataSource
  data:
    redis:
      host: ${SPRING_REDIS_HOST:localhost}
      port: 6379
      database: 0
      timeout: 10s
      password: ${SPRING_REDIS_PASSWORD:}
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: 10s
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /v3/api-docs
  group-configs:
    - group: 'default'
      paths-to-match: '/**'
      packages-to-scan: com.snzh
knife4j:
  enable: true
  setting:
    language: zh_cn

minio:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  accessKey: ${MINIO_ACCESS_KEY:minioadmin}
  secretKey: ${MINIO_SECRET_KEY:minioadmin}
  bucketName: cdu-snzh-miniapp

# 日志配置
logging:
  level:
    root: info
    com.snzh: debug

mybatis:
  mapper-locations: classpath:mapper/**/*.xml
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      # id 自增
      id-type: auto

snzh:
  wechat:
    appid: ${WECHAT_APPID:your-appid}
    secret: ${WECHAT_SECRET:your-secret}
    mchid: ${WECHAT_MCHID:your-mchid}
    mchSerialNo: ${WECHAT_MCH_SERIAL_NO:your-serial-no}
    privateKeyFilePath: ${WECHAT_PRIVATE_KEY_FILE_PATH:}
    apiV3Key: ${WECHAT_API_V3_KEY:your-api-v3-key}
    weChatPayCertFilePath: ${WECHAT_PAY_CERT_FILE_PATH:}
    notifyUrl: ${WECHAT_NOTIFY_URL:https://www.weixin.qq.com/wxpay/pay.php}
    refundNotifyUrl: ${WECHAT_REFUND_NOTIFY_URL:https://www.weixin.qq.com/wxpay/pay.php}
  # 微信小程序订阅消息模板配置（需要在微信小程序后台申请）
  template:
    payment-success: '' # 订单支付成功通知模板ID
    refund-success: '' # 订单退款成功通知模板ID
    visit-reminder: '' # 游玩日期提醒模板ID
    expire-reminder: '' # 订单即将过期提醒模板ID
    system-announcement: '' # 系统公告通知模板ID
  gaode:
    address: https://restapi.amap.com/v3
    key: ${GAODE_MAP_KEY:your-gaode-key}
    timeout: 5000
    connect-timeout: 3000
    static-map:
      height: 300
      width: 400
      zoom: 14
  jwt:
    access-token-expire: 3600000
    refresh-token-expire: 604800000
    secret: ${JWT_SECRET:default-jwt-secret-key}

# AI智能客服配置
ai:
  llm:
    # API Key
    api-key: ${AI_API_KEY:your-ai-api-key}
    model-name: qwen-plus
    # 温度参数（0-1），越高越随机，建议0.7
    temperature: 0.7
    # 最大Token数
    max-tokens: 10000
  chat:
    # 最大保留历史消息数
    max-history: 20
    # 会话过期时间（天）
    session-timeout: 7
    # 是否启用流式响应
    enable-streaming: true

# Dify API 配置（景区签到）
dify:
  api:
    url: ${DIFY_API_URL:http://8.156.89.203:83/v1/workflows/run}
    key: ${DIFY_API_KEY:app-jBHSROZDAHk1EL2rM9GjLNAJ}